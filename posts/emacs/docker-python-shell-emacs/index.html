<!doctype html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<title>Your python interpreter inside a docker container with Emacs - Adam Oudad</title>
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="generator" content="Hugo 0.72.0" /><meta itemprop="name" content="Your python interpreter inside a docker container with Emacs">
<meta itemprop="description" content="Emacs has this very powerful package Elpy which is usually recommended if you want to code in Python.  Docker can containerize your Python interpreter so that you can seemlessly run your applications on any device.  In Emacs with elpy installed, C-c C-c binding (C is for Control key) runs elpy-shell-send-region-to-buffer and is very handy for running on the fly python commands for testing your code. It actually use the content of the variable python-shell-interpreter for the python interpreter.">
<meta itemprop="datePublished" content="2020-04-06T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-04-06T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="261">



<meta itemprop="keywords" content="docker,productivity,python,programming,emacs," /><meta property="og:title" content="Your python interpreter inside a docker container with Emacs" />
<meta property="og:description" content="Emacs has this very powerful package Elpy which is usually recommended if you want to code in Python.  Docker can containerize your Python interpreter so that you can seemlessly run your applications on any device.  In Emacs with elpy installed, C-c C-c binding (C is for Control key) runs elpy-shell-send-region-to-buffer and is very handy for running on the fly python commands for testing your code. It actually use the content of the variable python-shell-interpreter for the python interpreter." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://adamoudad.github.io/posts/emacs/docker-python-shell-emacs/" />
<meta property="article:published_time" content="2020-04-06T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-04-06T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Your python interpreter inside a docker container with Emacs"/>
<meta name="twitter:description" content="Emacs has this very powerful package Elpy which is usually recommended if you want to code in Python.  Docker can containerize your Python interpreter so that you can seemlessly run your applications on any device.  In Emacs with elpy installed, C-c C-c binding (C is for Control key) runs elpy-shell-send-region-to-buffer and is very handy for running on the fly python commands for testing your code. It actually use the content of the variable python-shell-interpreter for the python interpreter."/>
<meta name="twitter:site" content="@OudadAdam"/>
<link rel="stylesheet" href="/css/bundle.min.a86839252b4aa4853111ceba45af5da1d6c3dc66a6a3b6854750bb2df61dfe37.css" integrity="sha256-qGg5JStKpIUxEc66Ra9dodbD3Gamo7aFR1C7LfYd/jc=">
        <link rel="stylesheet" href="/css/add-on.css">
</head>

  <body>
    
<header id="site-header">
  <nav id="site-nav">
    <h1 class="nav-title">
      <a href="/">
        
          
            posts
          
        
      </a>
    </h1>
    <menu id="site-nav-menu" class="flyout-menu">
      
        
          
          
            <a href="/" class="link"><i class='fa fa-home'></i> Home</a>
          
        
      
        
          
          
            <a href="/about/" class="link"><i class='far fa-id-card'></i> About</a>
          
        
      
        
          
          
            <a href="/posts/" class="link"><i class='far fa-newspaper'></i> Posts</a>
          
        
      
        
          
          
            <a href="/categories/" class="link"><i class='fas fa-sitemap'></i> Categories</a>
          
        
      
      <a href="#share-menu" class="share-toggle"><i class="fas fa-share-alt">&nbsp;</i>Share</a>
      

    </menu>
    

    <a href="#share-menu" class="share-toggle"><i class="fas fa-share-alt fa-2x">&nbsp;</i></a>
    <a href="#lang-menu" class="lang-toggle" lang="en">en</a>
    <a href="#site-nav" class="nav-toggle"><i class="fas fa-bars fa-2x"></i></a>
  </nav>
  <menu id="lang-menu" class="flyout-menu">
  <a href="#" lang="en" class="link active">English (en)</a>
  
    
      
    
  
</menu>

  
    <menu id="share-menu" class="flyout-menu">
      <h1>Share Post</h1>
      




  
    
    <a href="//twitter.com/share?text=Your%20python%20interpreter%20inside%20a%20docker%20container%20with%20Emacs&amp;url=https%3a%2f%2fadamoudad.github.io%2fposts%2femacs%2fdocker-python-shell-emacs%2f" target="_blank" rel="noopener" class="share-btn twitter">
        <i class="fab fa-twitter"></i><p>&nbsp;Twitter</p>
      </a>
  

  
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fadamoudad.github.io%2fposts%2femacs%2fdocker-python-shell-emacs%2f&amp;title=Your%20python%20interpreter%20inside%20a%20docker%20container%20with%20Emacs" target="_blank" rel="noopener" class="share-btn linkedin">
            <i class="fab fa-linkedin"></i><p>&nbsp;LinkedIn</p>
          </a>
  


    </menu>
  
</header>

    <div id="wrapper">
      <section id="site-intro" >
  <a href="/"><img src="/avatar.png" class="circle" width="150" alt="Adam Oudad" /></a>
  <header>
    <h1>Adam Oudad</h1>
  </header>
  <main>
    <p>(Machine) Learning log.</p>
  </main>
  
    <footer>
      <ul class="socnet-icons">
        

        <li><a href="//github.com/adamoudad" target="_blank" rel="noopener" title="GitHub" class="fab fa-github"></a></li>

<li><a href="//stackoverflow.com/users/7013114/adam-oudad" target="_blank" rel="noopener" title="Stack Overflow" class="fab fa-stack-overflow"></a></li>








<li><a href="//medium.com/@adam.oudad" target="_blank" rel="noopener" title="Medium" class="fab fa-medium"></a></li>
<li><a href="//linkedin.com/in/adam-oudad-9436b866" target="_blank" rel="noopener" title="LinkedIn" class="fab fa-linkedin"></a></li>















<li><a href="//twitter.com/OudadAdam" target="_blank" rel="noopener" title="Twitter" class="fab fa-twitter"></a></li>







<li><a href="//researchgate.net/profile/Adam_Oudad" target="_blank" rel="noopener" title="Research Gate"><i class="ai ai-researchgate"></i></a></li>



<li><a href="https://brave.com/ada345" target="_blank" rel="noopener" title="Install Brave with my referral link" class="fas fa-hand-holding-usd"></a></li>

      </ul>
    </footer>
  
</section>

      <main id="site-main">
        <article class="post">
  <header>
  <div class="title">
    
        <h2><a href="/posts/emacs/docker-python-shell-emacs/">Your python interpreter inside a docker container with Emacs</a></h2>
    
    
</div>
  <div class="meta">
    <time class="published" datetime="2020-04-06 00:00:00 &#43;0000 UTC">
      April 6, 2020
    </time>
    <span class="author"></span>
    
      <p>2 minutes read</p>
    
  </div>
</header>

  <section id="socnet-share">
    




  
    
    <a href="//twitter.com/share?text=Your%20python%20interpreter%20inside%20a%20docker%20container%20with%20Emacs&amp;url=https%3a%2f%2fadamoudad.github.io%2fposts%2femacs%2fdocker-python-shell-emacs%2f" target="_blank" rel="noopener" class="share-btn twitter">
        <i class="fab fa-twitter"></i><p>&nbsp;Twitter</p>
      </a>
  

  
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fadamoudad.github.io%2fposts%2femacs%2fdocker-python-shell-emacs%2f&amp;title=Your%20python%20interpreter%20inside%20a%20docker%20container%20with%20Emacs" target="_blank" rel="noopener" class="share-btn linkedin">
            <i class="fab fa-linkedin"></i><p>&nbsp;LinkedIn</p>
          </a>
  


  </section>
  

  <div class="content">
    <p>
  Emacs has this very powerful package <a href="https://github.com/jorgenschaefer/elpy">Elpy</a> which is usually recommended if you want to code in Python.
</p>
<p>
  Docker can containerize your Python interpreter so that you can seemlessly run your applications on any device.
</p>
<p>
  In Emacs with elpy installed, <code class="verbatim">C-c C-c</code> binding (<em>C</em> is for Control key) runs <code>elpy-shell-send-region-to-buffer</code> and is very handy for running on the fly python commands for testing your code. It actually use the content of the variable <code>python-shell-interpreter</code> for the python interpreter.
</p>
<p>
  The default value of this variable is <code>&#34;python&#34;</code>, which will most likely run your system-wide python interpreter. What we want is to run the following command which will send our python code to a running container.
</p>
<div class="src src-bash">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker run -it -v /tmp:/tmp -v <span style="color:#66d9ef">$(</span>pwd<span style="color:#66d9ef">)</span>:/code ufoym/deepo python3</code></pre></div>
</div>
<p>
See <a href="https://docs.docker.com/engine/reference/commandline/cli/">docker command line reference for details about this command</a>.
However just setting <code>python-shell-interpreter</code> to this will raise an error.
</p>
<div class="src src-text">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Python shell interpreter &#39;docker run -it -v /tmp:/tmp -v $(pwd):/code ufoym/deepo python3&#39; cannot be found. Please set the value &#39;python-shell-interpreter&#39; to a valid binary.</code></pre></div>
</div>
<p>
Emacs needs a shell script, so for example, you can set
</p>
<div class="src src-elisp">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elisp" data-lang="elisp">(setq python-shell-interpreter <span style="color:#e6db74">&#34;~/.docker-python-shell.sh&#34;</span>)</code></pre></div>
</div>
<p>
Then the file <code class="verbatim">~/.docker-python-shell.sh</code> will contain
</p>
<div class="src src-bash">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>docker run -it -v /tmp:/tmp -v <span style="color:#66d9ef">$(</span>pwd<span style="color:#66d9ef">)</span>:/code ufoym/deepo python3</code></pre></div>
</div>
<p>
Don&#39;t forget to make the script executable.
</p>
<div class="src src-bash">
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">chmod u+x ~/.docker-python-shell.sh</code></pre></div>
</div>
<p>
Two remarks on the <code>docker run</code> command:
</p>
<ul>
<li>
<p>
<code>-v /tmp:/tmp</code> can solve some errors caused by Python trying to read a file contained in <code class="verbatim">/tmp</code>, see <a href="https://stackoverflow.com/questions/43194627/how-to-connect-emacs-elpy-in-buffer-python-interpreter-to-docker-container">https://stackoverflow.com/questions/43194627/how-to-connect-emacs-elpy-in-buffer-python-interpreter-to-docker-container</a>
</p>
</li>
<li>
<p>
<code>-v $(pwd):/code</code> mount the directory of your python script to <code class="verbatim">/code</code> in the docker container, which is handy if you need to access another module or some data
</p>
</li>
</ul>

  </div>
  <footer>
    <ul class="stats">
  
    
    
      <li class="categories">
        <ul>
          
            
            <li><a class="article-category-link" href="https://adamoudad.github.io/categories/emacs">Emacs</a></li>
          
        </ul>
      </li>
    
  
  
    
    
      <li class="tags">
        <ul>
          
            
            <li><a class="article-category-link" href="https://adamoudad.github.io/tags/docker">docker</a></li>
          
            
            <li><a class="article-category-link" href="https://adamoudad.github.io/tags/productivity">productivity</a></li>
          
            
            <li><a class="article-category-link" href="https://adamoudad.github.io/tags/python">python</a></li>
          
            
            <li><a class="article-category-link" href="https://adamoudad.github.io/tags/programming">programming</a></li>
          
            
            <li><a class="article-category-link" href="https://adamoudad.github.io/tags/emacs">emacs</a></li>
          
        </ul>
      </li>
    
  
</ul>

  </footer>
</article>

    <article class="post">
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "adamoudad-github-io" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </article>




<div class="pagination">
  
    <a href="/posts/passgan/" class="button"><div class="previous"><div>Generative Adversarial Networks can crack your password!</div></div></a>
  
  
    <a href="/posts/data-processing-libraries/" class="button"><div class="next"><div>Data processing libraries in Python</div></div></a>
  
</div>


      </main>
      <section id="site-sidebar">
  
    <section id="recent-posts">
      <header>
        <h1>Recent posts</h1>
      </header>
      
      <article class="mini-post">
        <section>
          

        </section>
        <header>
          <h1><a href="/posts/progress_bar_with_tqdm/">Training models with a progress bar</a></h1>
          <time class="published" datetime="">October 12, 2020</time>
        </header>
      </article>
      
      <article class="mini-post">
        <section>
          

        </section>
        <header>
          <h1><a href="/posts/format-dates-python3/">How to format dates in Python3</a></h1>
          <time class="published" datetime="">August 4, 2020</time>
        </header>
      </article>
      
      <article class="mini-post">
        <section>
          

        </section>
        <header>
          <h1><a href="/posts/random-aphorism-notifications/">Schedule random aphorism notifications for your desktop</a></h1>
          <time class="published" datetime="">June 18, 2020</time>
        </header>
      </article>
      
      <article class="mini-post">
        <section>
          

        </section>
        <header>
          <h1><a href="/posts/python-slack-bot/">Have a bot haunt your Slack workspace</a></h1>
          <time class="published" datetime="">May 21, 2020</time>
        </header>
      </article>
      
      <article class="mini-post">
        <section>
          

        </section>
        <header>
          <h1><a href="/posts/data-processing-libraries/">Data processing libraries in Python</a></h1>
          <time class="published" datetime="">May 12, 2020</time>
        </header>
      </article>
      
      
        <a href="/posts/" class="button">See more</a>
      
    </section>
  

  
    
      <section id="categories">
        <header>
          <h1><a href="/categories">Categories</a></h1>
        </header>
        <ul>
          
            
          
          
          <li>
            
              <a href="/categories/machine-learning/">machine-learning<span class="count">6</span></a>
            
          
          <li>
            
              <a href="/categories/programming/">programming<span class="count">6</span></a>
            
          
          <li>
            
              <a href="/categories/natural-language-processing/">natural-language-processing<span class="count">3</span></a>
            
          
          <li>
            
              <a href="/categories/japanese/">japanese<span class="count">2</span></a>
            
          
          <li>
            
              <a href="/categories/linux/">linux<span class="count">2</span></a>
            
          
          <li>
            
              <a href="/categories/web/">web<span class="count">2</span></a>
            
          
          <li>
            
              <a href="/categories/emacs/">emacs<span class="count">1</span></a>
            
          
          <li>
            
              <a href="/categories/linguistic/">linguistic<span class="count">1</span></a>
            
          
          <li>
            
              <a href="/categories/python/">python<span class="count">1</span></a>
            
          
          <li>
            
              <a href="/categories/random/">random<span class="count">1</span></a>
            
          
          </li>
        </ul>
      </section>
    
  

  
    <section id="mini-bio">
      <header>
        <h1>About</h1>
      </header>
      <p>This website is a weblog were I write about computer science, machine learning, language learning.</p>
      <footer>
        <a href="/about" class="button">Learn More</a>
      </footer>
    </section>
  
</section>

      <footer id="site-footer">
  
      <ul class="socnet-icons">
        

        <li><a href="//github.com/adamoudad" target="_blank" rel="noopener" title="GitHub" class="fab fa-github"></a></li>

<li><a href="//stackoverflow.com/users/7013114/adam-oudad" target="_blank" rel="noopener" title="Stack Overflow" class="fab fa-stack-overflow"></a></li>








<li><a href="//medium.com/@adam.oudad" target="_blank" rel="noopener" title="Medium" class="fab fa-medium"></a></li>
<li><a href="//linkedin.com/in/adam-oudad-9436b866" target="_blank" rel="noopener" title="LinkedIn" class="fab fa-linkedin"></a></li>















<li><a href="//twitter.com/OudadAdam" target="_blank" rel="noopener" title="Twitter" class="fab fa-twitter"></a></li>







<li><a href="//researchgate.net/profile/Adam_Oudad" target="_blank" rel="noopener" title="Research Gate"><i class="ai ai-researchgate"></i></a></li>



<li><a href="https://brave.com/ada345" target="_blank" rel="noopener" title="Install Brave with my referral link" class="fas fa-hand-holding-usd"></a></li>

      </ul>
  
  <p class="copyright">
    
      &copy; 2020
      
        Adam Oudad
      
    . <br>
    Theme: <a href='https://github.com/pacollins/hugo-future-imperfect-slim' target='_blank' rel='noopener'>Hugo Future Imperfect Slim</a><br>A <a href='https://html5up.net/future-imperfect' target='_blank' rel='noopener'>HTML5 UP port</a> | Powered by <a href='https://gohugo.io/' title='0.72.0' target='_blank' rel='noopener'>Hugo</a>
  </p>
</footer>
<a id="back-to-top" href="#" class="fas fa-arrow-up fa-2x"></a>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css" integrity="sha384-D+9gmBxUQogRLqvARvNLmA9hS2x//eK1FhVb9PiU86gmcrBrJAQT8okdJ4LMp2uv" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.js" integrity="sha384-483A6DwYfKeDa0Q52fJmxFXkcPCFfnXMoXblOkJ4JcA8zATN6Tm78UNL72AKk+0O" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/contrib/auto-render.min.js" integrity="sha384-yACMu8JWxKzSp/C1YV86pzGiQ/l1YUfE8oPuahJQxzehAjEt2GiQuy/BIvl9KyeF" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>


      <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script><script src="/js/bundle.min.e0c399b948d3cf5c3a5e3badb94023d0b064a19ac39fd8cd79fb9f57fa4d1091.js" integrity="sha256-4MOZuUjTz1w6XjutuUAj0LBkoZrDn9jNefufV/pNEJE="></script>
    <script src="/js/add-on.js"></script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-150494000-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    </div>
  </body>
</html>
